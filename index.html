<!DOCTYPE html>

<html lang="fr-FR" dir="auto">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title lang="fr-FR">PoleMap, Carte des lieux d'int√©ret pour la pole danse fran√ßaise</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
   <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<link href="https://unpkg.com/tabulator-tables@6.3.1/dist/css/tabulator.min.css" rel="stylesheet">
 <script type="text/javascript" src="https://unpkg.com/tabulator-tables@6.3.1/dist/js/tabulator.min.js"></script>
<link rel='stylesheet' type='text/css' href='css/style.css' />
</head>
<body>
<div id="auth-container">
     <h2>üîê Acc√®s restreint</h2>
     <p>Veuillez entrer le mot de passe pour acc√©der √† la carte.</p>
     <input type="password" id="password" placeholder="Mot de passe">
     <button onclick="verifierMotDePasse()">Acc√©der</button>
     <p id="error-message" style="color: red;"></p>
</div>
<div id="map-container">
     <h2>üó∫ Carte des lieux</h2>
     <div id="map"></div>
     <div id="div-form-ajout-lieu">
<form id="form-ajout-lieu">

  <!-- Nom du lieu -->
  <div>
    <label for="nom">Nom du lieu</label>
    <input type="text" id="nom" name="nom" placeholder="Nom du lieu">
  </div>

  <!-- Adresse -->
  <div>
    <label for="adresse">Adresse</label>
    <input type="text" id="adresse" name="adresse" placeholder="Adresse">
  </div>

  <!-- Coordonn√©es -->
  <div>
    <label for="latitude">Latitude</label>
    <input type="number" step="any" id="latitude" name="latitude" placeholder="Latitude">
  </div>
  <div>
    <label for="longitude">Longitude</label>
    <input type="number" step="any" id="longitude" name="longitude" placeholder="Longitude">
  </div>

  <!-- Statut actif -->
  <div>
    <label for="active">Statut actif</label>
    <select id="active" name="active">
      <option value="Active" selected>Active</option>
      <option value="Inactive">Inactive</option>
      <option value="unknown" >Unknown</option>
    </select>
  </div>

  <!-- Type du lieu -->
  <div>
    <label for="type">Type</label>
    <select id="type" name="type">
      <option value="ecole" selected>√âcole</option>
      <option value="concurrent">Concurrent</option>
      <option value="event">√âv√©nement</option>
      <option value="autre">Autre</option>
      <option value="unknown">Unknown</option>
    </select>
  </div>

  <!-- Dates (affich√©es uniquement si type = "event") -->
  <div id="dates-container" style="display: none;">
    <div>
      <label for="date_start">Date de d√©but</label>
      <input type="date" id="date_start" name="date_start">
    </div>
    <div>
      <label for="date_end">Date de fin</label>
      <input type="date" id="date_end" name="date_end">
    </div>
  </div>

  <!-- Coordonn√©es de contact -->
  <div>
    <label for="mail">Email</label>
    <input type="email" id="mail" name="mail" placeholder="Email">
  </div>
  <div>
    <label for="phone">T√©l√©phone</label>
    <input type="tel" id="phone" name="phone" placeholder="T√©l√©phone">
  </div>

  <!-- R√©seaux sociaux / Site web -->
  <div>
    <label for="facebook">Facebook</label>
    <input type="url" id="facebook" name="facebook" placeholder="Lien Facebook">
  </div>
  <div>
    <label for="instagram">Instagram</label>
    <input type="url" id="instagram" name="instagram" placeholder="Lien Instagram">
  </div>
  <div>
    <label for="site_web">Site Web</label>
    <input type="url" id="site_web" name="site_web" placeholder="Lien du site web">
  </div>

  <!-- Description -->
  <div>
    <label for="description">Description</label>
    <textarea id="description" name="description" placeholder="Description"></textarea>
  </div>

  <!-- Statuts et commentaires -->
  <div>
    <label for="status_relation">Statut Relation</label>
    <input type="text" id="status_relation" name="status_relation" placeholder="Statut Relation" value="unknown">
  </div>
   <!-- Type du lieu -->
  <div>
    <label for="status_contact">Statut Contact</label>
    <select id="status_contact" name="status_contact">
      <option value="tocontact" selected>√† contacter</option>
      <option value="concurrent">contact√©</option>
      <option value="event">doit r√©pondre</option>
    </select>
  </div>
  <!-- Type du lieu -->
  <div>
    <label for="type">Type</label>
    <select id="type" name="type">
      <option value="int√©ress√©">int√©ress√©</option>
      <option value="pas int√©ress√©">pas int√©ress√©</option>
      <option value="unknown" selected>Unknown</option>
    </select>
  </div>
  <div>
    <label for="commentaire">Commentaire</label>
    <textarea id="commentaire" name="commentaire" placeholder="Commentaire"></textarea>
  </div>

  <!-- Source -->
  <div>
    <label for="source">Source</label>
    <input type="text" id="source" name="source" placeholder="Source">
  </div>

  <!-- Bouton de soumission -->
  <div>
    <button type="submit">Ajouter le lieu</button>
  </div>

</form>

<script>
  // R√©cup√©ration des √©l√©ments
  const typeSelect = document.getElementById('type');
  const datesContainer = document.getElementById('dates-container');
  const dateStartInput = document.getElementById('date_start');
  const dateEndInput = document.getElementById('date_end');

  // Fonction d'affichage/masquage des dates
  function toggleDates() {
    if (typeSelect.value === 'event') {
      datesContainer.style.display = 'block';
      // Rendre les dates obligatoires si c'est un √©v√©nement
      dateStartInput.required = true;
      dateEndInput.required = true;
    } else {
      datesContainer.style.display = 'none';
      // Retirer l'obligation de saisie
      dateStartInput.required = false;
      dateEndInput.required = false;
    }
  }

  // D√©clencher l'affichage d√®s qu'il y a un changement dans le select
  typeSelect.addEventListener('change', toggleDates);

  // V√©rifier l'√©tat initial au chargement de la page
  document.addEventListener('DOMContentLoaded', toggleDates);
</script>

     </div>
     <h3>Place to pole</h3>
     <div id="bdd-table"></div>

    <script src='js/site.js'></script>
</div>

</body>
</html>
